{"id":"a7fe30fb-061b-4b68-bece-54d25dca84c7","zed":"context","version":"0.4.0","text":"```toml lokal-link-be/supabase/config.toml:105-105\n# Excerpt from: auth > additional_redirect_urls\nadditional_redirect_urls = [\"http://127.0.0.1:3000\", \"http://127.0.0.1:3000/auth/callback\"]\n```\nthe nextjs app is  running in localhost 3000 and I got this Access blocked: This app’s request is invalid\ncan you help me with this?\n\nIf you're getting \"Access blocked: This app's request is invalid\" error while using Supabase authentication with Next.js, you likely need to update your redirect URLs configuration. Try adding these variations to your `additional_redirect_urls`:\n\n```toml\nadditional_redirect_urls = [\n  \"http://localhost:3000\",\n  \"http://localhost:3000/auth/callback\",\n  \"http://127.0.0.1:3000\",\n  \"http://127.0.0.1:3000/auth/callback\"\n]\n```\n\nKey points to check:\n\n1. Make sure you're using both `localhost` and `127.0.0.1` variants\n2. Verify the port number matches your Next.js app (3000)\n3. Include both root URLs and callback paths\n4. Double-check that your Supabase client initialization uses the correct URL and anon key\n5. After updating the config, restart your Supabase services\n\nAlso ensure your Supabase client setup in Next.js matches these URLs:\n\n```javascript\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n)\n```\n\nIf you're still having issues, you can:\n1. Check the browser console for specific error messages\n2. Verify your environment variables are correctly set\n3. Ensure your Supabase project settings match your local configuration\nthis is the code in my frontend   const { data, error } = await supabase.auth.signInWithOAuth({\n      provider: 'google',\n      options: {\n        redirectTo: `${window.location.origin}/auth/callback`,\n        queryParams: {\n          access_type: 'offline',\n          prompt: 'consent',\n        },\n      },\n    });\n\nthis is working before but got this error  You can’t sign in because this app sent an invalid request. You can try again later, or contact the developer about this issue. Learn more about this error\nIf you are a developer of this app, see error details.\nError 400: redirect_uri_mismatch\nthis is local supabase setup so supabase url and anon key is the same\ncan you check the whole config file\n\nI can help you troubleshoot the OAuth configuration. Please share your full `config.toml` file, especially the auth-related sections. \n\nFor the Google OAuth issue you're experiencing, you'll need to make sure:\n\n1. The redirect URI matches exactly in both places:\n   - Your Supabase config\n   - Your Google Cloud Console project settings\n\nTry this format for your code:\n\n```javascript\nconst { data, error } = await supabase.auth.signInWithOAuth({\n  provider: 'google',\n  options: {\n    redirectTo: 'http://localhost:3000/auth/callback', // Use explicit URL instead of window.location.origin\n    queryParams: {\n      access_type: 'offline',\n      prompt: 'consent',\n    },\n  },\n});\n```\n\nAlso, in your Google Cloud Console:\n1. Go to APIs & Services > Credentials\n2. Find your OAuth 2.0 Client ID\n3. Add these authorized redirect URIs:\n```\nhttp://localhost:3000/auth/callback\nhttp://127.0.0.1:3000/auth/callback\n```\n\nCould you share your complete `config.toml` so I can check if there might be other configuration issues?\n/","messages":[{"id":{"replica_id":0,"value":0},"start":0,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":868}}},{"id":{"replica_id":0,"value":66},"start":303,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":869}}},{"id":{"replica_id":0,"value":77},"start":330,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":870}}},{"id":{"replica_id":0,"value":84},"start":331,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":871}}},{"id":{"replica_id":0,"value":85},"start":1534,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":872}}},{"id":{"replica_id":0,"value":166},"start":1851,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":873}}},{"id":{"replica_id":0,"value":395},"start":2140,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":874}}},{"id":{"replica_id":0,"value":557},"start":2210,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":875}}},{"id":{"replica_id":0,"value":662},"start":2247,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":876}}},{"id":{"replica_id":0,"value":663},"start":3265,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":877}}}],"summary":"Supabase Auth Redirect Error Fix","slash_command_output_sections":[{"range":{"start":0,"end":194},"icon":"TextSnippet","label":"lokal-link-be/supabase/config.toml, Line 105","metadata":null}]}